{% extends "base.html" %}

{% block page_title %}API Documentation{% endblock %}

{% block content %}
<div class="api-docs-main">
    <div class="docs-header">
        <h2>API Documentation</h2>
        <button id="fetchDocsBtn" class="btn-fetch" onclick="fetchDocumentation()">ðŸ“¥ Fetch Documentation</button>
        <span id="docsStatus" class="status-text">Click button to load documentation</span>
    </div>

    <div class="api-info">
        <span class="api-base-url">Base URL: http://localhost:{{ config.run_details.root_port + config.run_details.port_offsets.api }}</span>
        <span class="api-version">Version: 1.0.0</span>
    </div>

    <div class="docs-container">
        <div class="docs-panel">
            <div id="docsContainer" class="docs-list">
                <p class="placeholder">Click "Fetch Documentation" button to load routes</p>
            </div>
        </div>

        <div class="source-panel">
            <div class="source-header">
                <h3>FastAPI Server Source</h3>
                <button id="refreshSourceBtn" class="btn-source-refresh" onclick="refreshSourceCode()">ðŸ”„ Refresh</button>
            </div>
            <div id="sourceContainer" class="source-code">
                <p class="placeholder">Source code will appear here</p>
            </div>
        </div>
    </div>
</div>



<script>
// Initialize API config with port from server
initializeApiConfig({{ config.run_details.root_port + config.run_details.port_offsets.api }});
</script>
<script src="{{ url_for('ui.static', filename='js/api-docs-page.js') }}"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>

{% endblock %}

{% extends "base.html" %}

{% block page_title %}BIST Tests{% endblock %}

{% block content %}
<div class="bist-container">
    <div class="bist-header">
        <h2>Built-In Self Tests (BIST)</h2>
        <div class="header-controls">
            <button id="runAllBtn" class="btn-run btn-primary" onclick="runBistTests()">â–¶ Run All Tests</button>
            <div class="run-options">
                <button class="btn-run-small" onclick="runBistTests('endpoints')" title="Test API endpoints only">Endpoints</button>
                <button class="btn-run-small" onclick="runBistTests('pages')" title="Test dashboard pages only">Pages</button>
                <button class="btn-run-small" onclick="runBistTests('dependencies')" title="Test external dependencies only">Dependencies</button>
            </div>
            <span id="runStatus" class="run-status"></span>
        </div>
    </div>

    <div class="bist-tabs">
        <button class="tab-btn active" onclick="switchTab('endpoints')">API Endpoints</button>
        <button class="tab-btn" onclick="switchTab('pages')">Dashboard Pages</button>
        <button class="tab-btn" onclick="switchTab('dependencies')">External Dependencies</button>
        <button class="tab-btn" onclick="switchTab('summary')">Summary</button>
    </div>

    <!-- Endpoints Tab -->
    <div id="endpoints" class="bist-tab-content active">
        <div id="endpoints-container" class="bist-tests-list">
            <p class="placeholder">Loading test results...</p>
        </div>
    </div>

    <!-- Pages Tab -->
    <div id="pages" class="bist-tab-content">
        <div id="pages-container" class="bist-tests-list">
            <p class="placeholder">Loading test results...</p>
        </div>
    </div>

    <!-- Dependencies Tab -->
    <div id="dependencies" class="bist-tab-content">
        <div id="dependencies-container" class="bist-tests-list">
            <p class="placeholder">Loading test results...</p>
        </div>
    </div>

    <!-- Summary Tab -->
    <div id="summary" class="bist-tab-content">
        <div id="summary-container" class="summary-stats">
            <p class="placeholder">Loading test summary...</p>
        </div>
    </div>
</div>

<script src="{{ url_for('ui.static', filename='js/bist-page.js') }}"></script>
{% endblock %}
